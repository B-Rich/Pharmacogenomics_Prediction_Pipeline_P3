<!--
TODO:
1. Allow output verbosity to be controlled from P3 settings
2. Create a wrapper R script which can be run from snakemake, sets relevant
   variables and knits the report.
3. Add support for coloring samples by a specified field.
-->


```{r, echo=FALSE, message=FALSE}
library('knitr')
library('ggplot2')
library('gplots')
library('reshape2')
library('RColorBrewer')
source('../../tools/shared/visualization.R')

set.seed(1)

opts_chunk$set(fig.width=1080/96,
               fig.height=1080/96,
               dpi=96)
```

```{r output_header, results='asis', echo=FALSE}
header <- sprintf("P3: RNA-Seq (%s)", analysis_title)
cat(paste0(header, '\n', paste(rep('=', nchar(header)), collapse=''), '\n\n'))

cat(format(Sys.time(), "Generated: <time>%Y-%m-%d</time>\n"))
```

Overview
--------

```{r child='child/rnaseq_overview.Rmd'}
```

Samples
-------

```{r child='child/rnaseq_sample_sizes.Rmd'}
```

### Count distributions

```{r child='child/rnaseq_sample_densities_log2cpm.Rmd'}
```

### Samples

```{r child='child/generic_sample_heatmaps.Rmd'}
```

```{r child='child/generic_sample_pca.Rmd'}
```

Genes
-----

```{r child='child/rnaseq_gene_heatmap_log2cpm.Rmd'}
```

System info
-----------

```{r, echo=FALSE}
date()
sessionInfo()
```
